<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Edit Ride TicoRide</title>
<link href="style.css" rel="stylesheet" type="text/css">

<script>
    function fill(){
        var lastObj = localStorage.getItem("lastRide");

        const lastRideStr = JSON.parse(lastObj);

        const rideStr = localStorage.getItem(lastRideStr.lastRide);

        const rideObj = JSON.parse(rideStr);


        var storedName = rideObj.rideName;
        var storedArrival = rideObj.arrival;
        var storedDeparture = rideObj.departure;
        var storedDescription = rideObj.description;
        var storedStart = rideObj.start;
        var storedEnd = rideObj.end;
        var lastRide = rideStr.lastRide;

        document.getElementById("user").value = storedName;
        document.getElementById("pass").value = storedStart;
        document.getElementById("pass1").value = storedEnd;
        document.getElementById("pass2").value = storedDescription;
        document.getElementById("dept").value = storedDeparture;
        document.getElementById("arrival").value = storedArrival;
    }
    function storeRide(){

    //window.alert(document.getElementById("monday").innerText)

    var rideName = document.getElementById("user").value;
    var start = document.getElementById('pass').value;
    var end = document.getElementById('pass1').value;
    var description = document.getElementById('pass2').value;
    var departure = document.getElementById('dept').value;
    var arrival = document.getElementById('arrival').value;
    var currentUser = localStorage.getItem("currentUser");


    const ride = { rideName: rideName, start: start, end: end, description: description, departure:departure, arrival:arrival, creador:currentUser};

    localStorage.setItem(rideName, JSON.stringify(ride));
    window.alert('Your ride has been Updated');
    window.open("VerRide.html","myWindow");
 }
    function delete1(){
        var nombre = document.getElementById("user").value;

        var r = confirm("Are you sure you want to delete this ride?");
        if (r == true) {
            localStorage.removeItem(nombre);
            alert("Ride -" + nombre +  "- deleted");
        } else {
        alert("Ride NOT deleted")
        }
}

    </script>
</head>
<body onload="fill()">
    <img src="logo.png" alt="Logo" class="center">

    <div class="div1">
    <a href="Dashboard.html"> <button type="button" id="button1" style ="background-color: lightgreen;">Dashboard</button>  </a>
    <button type="button" id="button2" style ="background-color: white; color: black;">Rides</button>
    <a href="Configuracion.html"> <button type="button" id="button3" style ="background-color: lightgreen;">Settings</button>  </a>

    </div><br>

    <p style="color:#1C4E77;font-size:26px;text-align:center;">
    Edit Ride
    </p>
    <form>
            <label for="user">Name:</label><br>
            <input type="text" id="user" name="user"><br><br>

            <label for="pass" style= "display: inline-block">Start:</label>
            <input type="text" id="pass" name="pass">
            <p style= "display: inline-block"> &emsp;</p>
            <label for="pass1" style= "display: inline-block">End:</label>
            <input type="text" id="pass1" name="pass1"><br><br>

            <label for="pass2">Description:</label><br>
            <input type="text" id="pass2" name="pass2" style="height:60px; width:450px;"><br><br>

    </form>
    <hr>
    <p>When:</p>

    <form>
         <label for="dept" style= "display: inline-block">Departure:</label>
         <input type="text" id="dept" name="pass">
         <p style= "display: inline-block"> &emsp;</p>
         <label for="arrival" style= "display: inline-block">Arrival:</label>
         <input type="text" id="arrival" name="pass1">
    </form>

  <div style="text-align:justify; display:flex; flex-direction:column; align-items:center; justify-content:center;">
    <p style="color:#1C4E77;font-size:18px;">
        Days:
    </p>
    <ul style="color:#1C4E77;font-size:14px; list-style-type:none;">
      <li><input type="checkbox"> Monday</li>
      <li><input type="checkbox"> Tuesday</li>
      <li><input type="checkbox"> Wednesday</li>
      <li><input type="checkbox"> Thursday</li>
      <li><input type="checkbox"> Friday</li>
      <li><input type="checkbox"> Saturday</li>
      <li><input type="checkbox"> Sunday</li>
    </ul>
      <p style="display: inline-block;"><a href="Dashboard.html">Cancel</a></p>
      <input id= "create_btn" type="button" value="Update Ride" onclick="storeRide()">
      <br>
      <input id= "delete_btn" type="button" value="Delete Ride" onclick="delete1()">
    </div>









</body>
</html>
